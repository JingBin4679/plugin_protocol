<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Plugin</title>
    <link type="text/css" href="../css/test.css" rel="stylesheet"/>
    <script src="../js/Plugin.js"></script>
    <script type="text/javascript">
        var protocol = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
            "<plugin name=\"simplemain\"\n" +
            "        id=\"plugin://simple_main\"\n" +
            "        version=\"2\">\n" +
            "    <attrs>\n" +
            "        <attr name=\"desc\">简化版首页插件</attr>\n" +
            "    </attrs>\n" +
            "    <page desc=\"首页\" design=\"res/simple_main_design.jpg\" id=\"page_simple_main\" screen=\"1920x1080\"\n" +
            "          type=\"main\">\n" +
            "        <attrs>\n" +
            "            <attr name=\"name\">简化版版首页</attr>\n" +
            "            <attr name=\"width\">1920</attr>\n" +
            "            <attr name=\"height\">1080</attr>\n" +
            "        </attrs>\n" +
            "        <data-handler>\n" +
            "            <handler commmand=\"open_search_page\" desc=\"打开搜索页面\" data=\"\"></handler>\n" +
            "            <handler commmand=\"open_history_page\" desc=\"打开历史记录页面\" data=\"\"></handler>\n" +
            "        </data-handler>\n" +
            "        <data-filter>" +
            "            <filter data=\"category\"/>\n" +
            "        </data-filter>\n" +
            "        <view desc=\"首页LOGO\" design=\"res/simple_main_logo.jpg\" id=\"position://logo_item\" index=\"0\" min=\"1\" max=\"1\">\n" +
            "            <configs>\n" +
            "                <config name=\"logo\" desc=\"logo图片\" type=\"image\"/>\n" +
            "                <config name=\"slogan\" desc=\"企业理念\" type=\"text\"/>\n" +
            "            </configs>\n" +
            "            <attrs>\n" +
            "                <attr name=\"x\">84</attr>\n" +
            "                <attr name=\"y\">66</attr>\n" +
            "                <attr name=\"width\">156</attr>\n" +
            "                <attr name=\"height\">108</attr>\n" +
            "            </attrs>\n" +
            "        </view>\n" +
            "        <view desc=\"栏目\" design=\"res/simple_main_category.jpg\" id=\"position://category_list\"\n" +
            "              index=\"1\" max=\"2\" min=\"2\">\n" +
            "            <configs>\n" +
            "                <config name=\"image-normal\" desc=\"Item默认图片\" type=\"image\"/>\n" +
            "                <config name=\"image-focus\" desc=\"Item焦点图片\" type=\"image\"/>\n" +
            "            </configs>\n" +
            "            <attrs>\n" +
            "                <attr name=\"x\">84</attr>\n" +
            "                <attr name=\"y\">291</attr>\n" +
            "                <attr name=\"width\">336</attr>\n" +
            "                <attr name=\"height\">282</attr>\n" +
            "                <attr name=\"extend-direction\" desc=\"元素延伸方向,取值范围为[right,left,up,down]\">down</attr>\n" +
            "                <attr name=\"margin\" desc=\"元素间间隔，首尾元素不作用于父容器，依次为[上，左，右，下]\">0,0,0,21</attr>\n" +
            "            </attrs>\n" +
            "            <data-filter>\n" +
            "                <filter data=\"category\"/>\n" +
            "            </data-filter>\n" +
            "        </view>\n" +
            "        <view desc=\"推荐横海报\" design=\"res/simple_main_horizontal_recommend.jpg\"\n" +
            "              id=\"position://recommend_horizontal\" index=\"2\" max=\"1\" min=\"0\">\n" +
            "            <attrs>\n" +
            "                <attr name=\"x\">441</attr>\n" +
            "                <attr name=\"y\">291</attr>\n" +
            "                <attr name=\"width\">846</attr>\n" +
            "                <attr name=\"height\">549</attr>\n" +
            "            </attrs>\n" +
            "            <configs>\n" +
            "                <config name=\"image-normal\" desc=\"海报图片\" type=\"image\"/>\n" +
            "                <config name=\"title\" desc=\"标题\" type=\"text\"/>\n" +
            "                <config name=\"desc\" desc=\"看点\" type=\"text\"/>\n" +
            "            </configs>\n" +
            "            <data-filter>\n" +
            "                <filter data=\"media\"/>\n" +
            "            </data-filter>\n" +
            "        </view>\n" +
            "        <view desc=\"推荐竖海报\" design=\"res/main_simple_vertical_recommend.jpg\"\n" +
            "              id=\"position://recommend_vertical\" index=\"3\" min=\"0\">\n" +
            "            <attrs>\n" +
            "                <attr name=\"x\">1308</attr>\n" +
            "                <attr name=\"y\">291</attr>\n" +
            "                <attr name=\"width\">393</attr>\n" +
            "                <attr name=\"height\">549</attr>\n" +
            "                <attr name=\"extend-direction\" desc=\"元素延伸方向,取值范围为[right,left,up,down]\">right</attr>\n" +
            "                <attr name=\"margin\" desc=\"元素间间隔，首尾元素不作用于父容器，依次为[上，左，右，下]\">0,0,21,0</attr>\n" +
            "            </attrs>\n" +
            "            <configs>\n" +
            "                <config name=\"image-normal\" desc=\"海报图片\" type=\"image\"/>\n" +
            "                <config name=\"title\" desc=\"标题\" type=\"text\"/>\n" +
            "                <config name=\"desc\" desc=\"看点\" type=\"text\"/>\n" +
            "            </configs>\n" +
            "            <data-filter>\n" +
            "                <filter data=\"media\"/>\n" +
            "            </data-filter>\n" +
            "        </view>\n" +
            "        <view desc=\"欢迎页面配置\" id=\"position://main_welcome\" index=\"4\" max=\"10\" min=\"0\" static=\"true\">\n" +
            "            <attrs>\n" +
            "                <attr name=\"x\">0</attr>\n" +
            "                <attr name=\"y\">0</attr>\n" +
            "                <attr name=\"width\">1920</attr>\n" +
            "                <attr name=\"height\">1080</attr>\n" +
            "            </attrs>\n" +
            "            <configs>\n" +
            "                <config name=\"show_length\" desc=\"展示时长（单位：秒）\" type=\"text\"/>\n" +
            "            </configs>\n" +
            "            <data-filter>\n" +
            "                <filter data=\"media\"></filter>\n" +
            "                <filter data=\"image\"></filter>\n" +
            "            </data-filter>\n" +
            "        </view>\n" +
            "    </page>\n" +
            "</plugin>\n";
        var cb = new Object();
        cb.onError = function (code, error) {
            console.log(code + "    " + error);
        }
        cb.onSuccess = function (code, pluginPage) {
//            document.write(obj2string(pluginPage));
        }
        window.onload = new function () {
            var result = parsePluginProtocol(protocol, 'page_simple_main', cb);
        }

        function gen() {
            var items = getAllViewItem();
            if (items != null && items.length > 0) {
                var content = document.getElementById("view_content");
                for (var index in items) {
                    var div = document.createElement("div");
                    div.className = "view";
                    div.innerHTML = "<h2>" + items[index].desc + "</h2>";
                    content.appendChild(div);
                }
            }
        }
    </script>
    <style>
    </style>
</head>
<body>
<div id="view_content" class="container">
    <button value="生成" class="gen" onclick="gen()">生成</button>
</div>
</body>
</html>